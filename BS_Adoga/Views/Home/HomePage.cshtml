@model demoshopViewModels
@{
    ViewBag.Title = "Home";
    Layout = "~/Views/Shared/_AdogaLayout.cshtml";

}

@section topCSS{
    <link rel="stylesheet" type="text/css"
          href="https://cdn.bootcdn.net/ajax/libs/bootstrap-daterangepicker/3.1/daterangepicker.min.css" />
    <link rel="stylesheet" href="~/Asset/CSS/HomePage.css" />
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">

    <!-- bear：0610 新增-->
    <style>

        .head-nav-item.red, .head-nav-item.login-btn, .head-nav-item.register-btn {
            padding: 14px 10px;
        }
    </style>
}
@*@using (Html.BeginForm("Searchtwo", "Home"))
    {

        <input type="submit" name="cardlocal" value="" id="btn1" style="display: none;" />

    }*@

@using (Html.BeginForm("HomePage", "Home"))
{

    <input class="none" type="text" name="cardlocal" v-model="projectForm.collectionName" value="" id="btn1" />

}
<input class="none" type="text" name="cba" value="" id="btn2" />
<div class="bg"></div>

@using (Html.BeginForm("Search", "Home"))
{


    <div class="island d-flex flex-column  align-items-center">
        <h3 class="text-white fw-bold first-title ">
            訂飯店、住度假村、睡青年旅館
        </h3>
        <p class="text-white first-title2 ">
            包山包海超過 200 萬間國內外各類優惠住宿

        </p>
        <input class="none" type="text" name="data" value="" />

    </div>

    <div class="container  " id="container">
        <div class="input-group mb-3">
            <div id="app">
                <el-select style=" z-index: 3;" id="inputGroupSelect02" v-model="value" placeholder="&#xf002; 輸入城市、區域、景點或住宿名稱" filterable
                           name="search" clearable default-first-option>
                    <el-option-group v-for="group in options2"
                                     :key="group.label"
                                     :label="group.label">
                        <el-option v-for="item in group.options"
                                   :key="item.value"
                                   :label="item.label "
                                   :value="item.value" class="asd">
                            <span style="float: left">{{ item.label }}</span>

                            <span style="float: right; color: #8492a6; font-size: 13px"> {{ item.price }}</span>
                        </el-option>
                    </el-option-group>
                </el-select>


            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class=" bd-content">
                        <div class="container " id="container1">

                            <div id="datetime">

                                <div class="timebox d-flex justify-content-center  align-items-center">
                                    <div class="col-6 d-flex">
                                        <i class="far fa-calendar fa-2x time-box-1"></i>
                                        <div>

                                            <input type="text" id="range_start" name="start" value="" />

                                            <input type="text" id="week_start" value="" />
                                        </div>

                                    </div>
                                    <div class="line">

                                    </div>
                                    <div class="col-6 d-flex">
                                        <i class="fas fa-calendar fa-2x time-box-2"></i>
                                        <div>
                                            <input type="text" id="range_end" name="end" value="" />
                                            <input type="text" id="week_end" value="" style=" " />
                                        </div>
                                    </div>
                                </div>
                                <input type="text" class="calendar-minus 	calendar-plus from-control" id="demo" name="date_range" />

                            </div>





                            @Html.Partial("_nav")


                        </div>
                    </div>
                </div>
            </div>
            <div class="form-check border d-flex " id="sale-absolute">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" id="saleprice" for="flexCheckDefault">
                    享達25%的訂房折扣
                </label>
                <div id="sale" class="d-flex justify-content-center bg-danger align-items-center">
                    <h4 class="text-white ">住宿</h4>
                </div>
            </div>


        </div>
        <button type="submit" class="btn btn-danger" id="search">搜尋</button>
    </div>

}
<div id="carouselExampleControls" class="carousel slide" data-interval="false">
    <div class=" d-flex justify-content-center" style="margin-bottom: 50px;">
        <h1 class="fs-4">台灣熱門城市</h1>
    </div>

    <div class="carousel-inner">
        <div class="carousel-item active">
            <div class="container">
                <div class="container row ">
                    <div class="d-flex   align-items-center">
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/4951/1_4951_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-1" style="">
                                台北市
                            </h2>
                            <p id="tw-p-1">2,976間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/12080/1_12080_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line" style="">
                                台中市
                            </h2>
                            <p id="tw-p-1">1,592間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/756/1_756_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                高雄市
                            </h2>
                            <p id="tw-p-1" style="">957間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/18347/1_18347_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                台南市
                            </h2>
                            <p id="tw-p-1">1,420間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/88773/1_88773_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                宜蘭縣
                            </h2>
                            <p id="tw-p-1">1,843間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/23127/1_23127_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                花蓮縣
                            </h2>
                            <p id="tw-p-1">2,003間宿舍</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="carousel-item ">
            <div class="container">
                <div class="container row">
                    <div class="d-flex   align-items-center">
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/4740/1_4740_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                台東縣
                            </h2>
                            <p id="tw-p-1">1,138間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/18343/1_18343_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">墾丁</h2>
                            <p id="tw-p-1">1,196間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/11977/1_11977_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                嘉義縣
                            </h2>
                            <p id="tw-p-1">353間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/18346/1_18346_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line" ">
                                南投縣
                            </h2>
                            <p id="tw-p-1">1,019間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/8453/1_8453_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                桃園市
                            </h2>
                            <p id="tw-p-1">352間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/23127/1_23127_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                新竹縣
                            </h2>
                            <p id="tw-p-1">244間宿舍</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <a class="carousel-control-prev carousel-dark" href="#carouselExampleControls" role="button"
       data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </a>
    <a class="carousel-control-next carousel-dark" href="#carouselExampleControls" role="button"
       data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </a>
</div>
<div class="container d-flex justify-content-center align-items-center flex-column" style="margin-top: 50px;">
    <h1 id="travel">推薦您下一趟旅行去處！</h1>
    <div class="row" id="motal">
        <div class="d-flex  align-items-center " id="box" style="margin-left: -100px;">

            @*@model IEnumerable<Card>*@


            
                @Html.Partial("_SimpleCardPartial");
       


        </div>
    </div>
</div>

<div id="carouselExampleControls2" class="carousel slide" data-interval="false"
     style="">
    <div class=" d-flex justify-content-center" style="margin-bottom: 50px;">
        <h1 class="fs-4">台灣境外的熱門城市</h1>
    </div>

    <div class="carousel-inner">
        <div class="carousel-item active">
            <div class="container">
                <div class="container row ">
                    <div class="d-flex   align-items-center">
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/16808/1_16808_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">香港</h2>
                            <p id="tw-p-1">1,792間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/13170/1_13170_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                胡志明市
                            </h2>
                            <p id="tw-p-1">10,146間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/21397/1_21397_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">澳門</h2>
                            <p id="tw-p-1">144間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/2758/1_2758_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">河內</h2>
                            <p id="tw-p-1">6,699間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/14524/1_14524_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                吉隆坡
                            </h2>
                            <p id="tw-p-1">11,303間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">

                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/9395/1_9395_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                曼谷
                            </h2>
                            <p id="tw-p-1">10,409間宿舍</p>

                        </div>

                    </div>
                </div>
            </div>

        </div>
        <div class="carousel-item ">
            <div class="container">
                <div class="container row">
                    <div class="d-flex   align-items-center">
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/5085/1_5085_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                東京
                            </h2>
                            <p id="tw-p-1">11,333間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/115678/1_115678_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">平陽</h2>
                            <p id="tw-p-1">125間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/10372/1_10372_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                墨爾本
                            </h2>
                            <p id="tw-p-1">3,374間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/4064/1_4064_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">
                                新加坡
                            </h2>
                            <p id="tw-p-1">1,085間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/17190/1_17190_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">頭頓</h2>
                            <p id="tw-p-1">3,071間宿舍</p>
                        </div>
                        <div class="col-2 d-flex flex-column justify-content-center align-items-center">
                            <img class="rounded-circle"
                                 src="https://pix6.agoda.net/geo/city/1808/1_1808_02.jpg?s=124x124&ar=1x1">
                            <h2 class="fw-bold" id="tw-line">新山</h2>
                            <p id="tw-p-1">3,662間宿舍</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <a class="carousel-control-prev carousel-dark" href="#carouselExampleControls2" role="button"
       data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </a>
    <a class="carousel-control-next carousel-dark" href="#carouselExampleControls2" role="button"
       data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </a>
</div>


@section endJS{
    <script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.bootcss.com/moment.js/2.24.0/moment.min.js"></script>

    <script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/bootstrap-daterangepicker/3.1/daterangepicker.min.js"></script>
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="~/Asset/js/home.js"></script>
    <script src="https://momentjs.com/downloads/moment-with-locales.js"></script>

    <script>
      
        $(document).ready(function () {
         
            document.getElementsByName("cardlocal")[0].value = localStorage.getItem("key");
            if (document.getElementsByName("cardlocal")[0].value != sessionStorage.getItem("online")) {
                hand2(document.getElementsByName("cardlocal")[0].value);
                getSavedValue2(document.getElementsByName("cardlocal")[0].value);

                function hand2(e) {
                    var name = "online";
                    var val = e;
                    console.log(val);
                    sessionStorage.setItem(name, val);
                }
                function getSavedValue2(v) {
                    if (!sessionStorage.getItem(v)) {
                        return "";
                    }
                    return sessionStorage.getItem(v);

                }
                
                var lol = $("#btn1").val();
                
                //button.form.submit();
                $.ajax({
                    url: "/Home/HomePage",
                    //传给服务器的数据(即后台AddUsers()方法的参数,参数类型要一致才可以)
                    type: 'POST',
                    cache: false,
                    data: {cardlocal:lol},
                    //数据类型必须有
                    async: true,//异步
                    error: function () {
                        alert("An error occurred.");
                    },
                    success: function (data) {
                        $("#box").html(data);
                   
                    
                    }
                });
               
            }

            if (window.history.replaceState) {
                window.history.replaceState(null, null, window.location.href);
            }


        });

    </script>
    <script>


              moment().format();
        $('#demo').daterangepicker({
            "autoApply": true,
            "locale": {
                "format": "MM/DD/YYYY",
                "separator": " - ",
                "applyLabel": "確認",
                "cancelLabel": "取消",
                "fromLabel": "從",
                "toLabel": "到",
                "customRangeLabel": "Custom Range",
                "weekLabel": "W",
                "daysOfWeek": [
                    "日", "一", "二", "三", "四", "五", "六"
                ],
                "monthNames": [
                    "一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"
                ],
                "firstDay": 1
            },


            "startDate": moment(),
            "endDate": moment().add('days', 1)
        }).on('change', function () {
            var date_range = $('#demo').val();
            var dates = date_range.split(" - ");

            var start1 = moment(dates[0]).format('YYYY年MM月DD日');
            var end1 = moment(dates[1]).format('YYYY年MM月DD日');

            $('#range_start').val(start1);
            $('#range_end').val(end1);
            moment.locale('zh-tw');
            var start1 = moment(dates[0]).format('dddd');

            $('#week_start').val(start1);

            var end1 = moment(dates[1]).format('dddd');

            $('#week_end').val(end1);
            $('#person-info').trigger("click");

            var date_range2 = $('#demo').val();
            var dates2 = date_range2.split(" - ");
            var start12 = moment(dates[0]);
            var end12 = moment(dates[1]);
            var date03 = (new Date(end12).getTime() - new Date(start12).getTime()) / 86400000;
            document.getElementsByName("data")[0].value = date03;


        });

        var date_range = $('#demo').val();
        var dates = date_range.split(" - ");

        var start = moment(dates[0]).format('YYYY年MM月DD日');
        var end = moment(dates[1]).format('YYYY年MM月DD日');
        $('#range_start').val(start);
        $('#range_end').val(end);
        moment.locale('zh-tw');
        var start = moment(dates[0]).format('dddd');

        $('#week_start').val(start);
        var end = moment(dates[1]).format('dddd');

        $('#week_end').val(end);
        var start = moment(dates[0], 'YYYY MM DD');
        var end = moment(dates[1], 'YYYY MM DD');


        function dedup(arr) {
            var hashTable = {};

            return arr.filter(function (el) {
                var key = JSON.stringify(el);
                var match = Boolean(hashTable[key]);

                return (match ? false : hashTable[key] = true);
            });
        }
        var deduped = dedup([   @foreach (var item in Model.My_MyHotels)
                            {


                    @Html.Partial("_option2", item);


                            }]);
        var Main = {
            data() {
                return {



                    options3: [{
                        label: '熱門城市',
                        options: deduped
                    }, {
                        label: '飯店名',
                        options: [    @foreach (var item in Model.My_MyHotels)
                            {


                    @Html.Partial("_option", item);


                            }]
                    }],
                    options2: [
                    ],


                    value: ''
                };

            },
            methods: {

                handleFilter(letter) {
                    if (!letter) {
                        this.options2 = this.options3

                        return

                    }
                    this.options2 = this.options.filter(function (el, i, arr) {
                        return arr.indexOf(el) === i;
                    });

                }


            },
            mounted() {

                this.options2 = this.options3


            }

        };
            var Ctor = Vue.extend(Main)
            new Ctor().$mount('#app')


    </script>
    <script>
        $(".asd").click(function () {
            $('#demo').trigger("click");
        });
        document.getElementById("search").addEventListener('click', function () {
            hand(document.getElementsByName("search")[0].value);
        });
        getSavedValue(document.getElementsByName("search")[0].value);

        function hand(e) {
            var name = "key";
            var val = e;
            console.log(val);
            localStorage.setItem(name, val);
        }
        function getSavedValue(v) {
            if (!localStorage.getItem(v)) {
                return "";
            }
            return localStorage.getItem(v);

        }
    </script>



}





